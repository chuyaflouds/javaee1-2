<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.example.javaee.class01.jdbc.BlogMapper">
    <select id="Studentc" parameterType="Long" resultType="int">
        select count(*) from school.s_student where id=#{id}
    </select>

    <select id="Teacherc" parameterType="Long" resultType="int">
        select count(*) from school.s_teacher where id=#{id}
    </select>

    <select id="Student" parameterType="Long" resultType="org.example.javaee.class01.model.Student">
        select * from school.s_student where id=#{id}
    </select>

    <select id="Teacher" parameterType="Long" resultType="org.example.javaee.class01.model.Teacher">
        select * from school.s_teacher where id=#{id}
    </select>

    <select id="StudentHomeworkH" parameterType="Long" resultType="org.example.javaee.class01.model.Homework">
        select * from school.s_homework where id=#{id}
    </select>

    <select id="StudentHomeworkSH" parameterType="Long" resultType="org.example.javaee.class01.model.StudentHomework">
        select * from school.s_student_homework where id=#{id}
    </select>

    <insert id="addStudentHomework" parameterType="org.example.javaee.class01.model.StudentHomework">
        insert into school.s_student_homework (student_id,homework_id,homework_title
        ,homework_content,submit_content,review_content,create_time,update_time) VALUES (#{student_id},
                                                                                         #{homework_id},
                                                                                         #{homework_title},
                                                                                         #{homework_content},
                                                                                         #{submit_content},
                                                                                         null,
                                                                                         now(),
                                                                                         now())
    </insert>

    <update id="addReview" parameterType="org.example.javaee.class01.model.StudentHomework">
        update  school.s_student_homework
        <trim prefix="set" suffixOverrides=",">
            <if test="review_content">review_content=#{review_content},</if>
        </trim>
        WHERE id=#{id}
    </update>

    <update id="Revisehomework" parameterType="org.example.javaee.class01.model.StudentHomework">
        update  school.s_student_homework
        <trim prefix="set" suffixOverrides=",">
            <if test="submit_content">submit_content=#{submit_content},</if>
        </trim>
        WHERE id=#{id}
    </update>

    <select id="selectAll" resultType="org.example.javaee.class01.model.StudentHomework">
        select * from school.s_student_homework
    </select>

    <select id="selectAllMyHomework" resultType="org.example.javaee.class01.model.StudentHomework">
        select * from school.s_student_homework where student_id=#{student_id}
    </select>

    <select id="selectAllHomework" resultType="org.example.javaee.class01.model.Homework">
        select * from school.s_homework
    </select>


    <insert id="addHomework" parameterType="org.example.javaee.class01.model.Homework">
        insert into school.s_homework (title,content,create_time,update_time) VALUES (#{title},
                                                                                      #{content},
                                                                                      now(),
                                                                                      now())
    </insert>

    <insert id="addStudent" parameterType="org.example.javaee.class01.model.Student">
        insert into school.s_student VALUES (#{id},#{name},#{password})
    </insert>

    <insert id="addTeacher" parameterType="org.example.javaee.class01.model.Teacher">
        insert into school.s_teacher VALUES (#{id},#{name},#{password})
    </insert>


</mapper>